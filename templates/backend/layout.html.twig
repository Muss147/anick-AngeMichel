<!DOCTYPE html>
<!--
Author: Moussa Fofana
Product Name: Wedding page
Website: https://www.moussa-fofana.site
Email: hello@moussa-fofana.com
Contact: +225 07 471 612 21
-->
<html lang="en">
  <!--begin::Head-->
  <head>
    <title>
      Bienvenue | Wedding QR check
    </title>
    <meta charset="utf-8" />
    <meta name="author" content="EMF Technologies : Moussa Fofana" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="EMF Technologies : Moussa Fofana" />
    <link rel="shortcut icon" href="assets/media/logos/favicon.ico" />

    <!--begin::Fonts(mandatory for all pages)-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700" />
    <!--end::Fonts-->

    <!--begin::Vendor Stylesheets(used for this page only)-->
    <!-- <link href="/metronic8/demo2/assets/plugins/custom/fullcalendar/fullcalendar.bundle.css" rel="stylesheet" type="text/css"/> -->
    <link href="assets/plugins/datatables.bundle.css" rel="stylesheet" type="text/css" />
    <!--end::Vendor Stylesheets-->

    <!--begin::Global Stylesheets Bundle(mandatory for all pages)-->
    <link href="assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/style.bundle.css" rel="stylesheet" type="text/css" />
    <!--end::Global Stylesheets Bundle-->

    <style type="text/css">
      #reader__dashboard_section > div:last-child, #reader__camera_selection {
        display: none;
      }
    </style>

    <script>
      // Frame-busting to prevent site from being loaded within a frame without permission (click-jacking)
      if (window.top != window.self) {
        window.top.location.replace(window.self.location.href);
      }
    </script>
  </head>
  <!--end::Head-->

  <!--begin::Body-->
  <body
    id="kt_body"
    class="header-fixed header-tablet-and-mobile-fixed toolbar-enabled"
  >
    <!--begin::Theme mode setup on page load-->
    <script>
      var defaultThemeMode = "light";
      var themeMode;

      if (document.documentElement) {
        if (document.documentElement.hasAttribute("data-bs-theme-mode")) {
          themeMode =
            document.documentElement.getAttribute("data-bs-theme-mode");
        } else {
          if (localStorage.getItem("data-bs-theme") !== null) {
            themeMode = localStorage.getItem("data-bs-theme");
          } else {
            themeMode = defaultThemeMode;
          }
        }

        if (themeMode === "system") {
          themeMode = window.matchMedia("(prefers-color-scheme: dark)").matches
            ? "dark"
            : "light";
        }

        document.documentElement.setAttribute("data-bs-theme", themeMode);
      }
    </script>
    <!--end::Theme mode setup on page load-->

    <!--begin::Main-->
    <!--begin::Root-->
    <div class="d-flex flex-column flex-root">
      <!--begin::Page-->
      <div class="page d-flex flex-row flex-column-fluid">
        <!--begin::Wrapper-->
        <div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
          <!--begin::Header-->
          <div
            id="kt_header"
            class="header align-items-stretch mb-5 mb-lg-10"
            data-kt-sticky="true"
            data-kt-sticky-name="header"
            data-kt-sticky-offset="{default: '200px', lg: '300px'}"
          >
            <!--begin::Container-->
            <div class="container-xxl d-flex align-items-center">
              <!--begin::Heaeder menu toggle-->
              <div
                class="d-flex topbar align-items-center d-lg-none ms-n2 me-3"
                title="Show aside menu"
              >
                <div
                  class="btn btn-icon btn-active-light-primary btn-custom w-30px h-30px w-md-40px h-md-40px"
                  id="kt_header_menu_mobile_toggle"
                >
                  <i class="ki-duotone ki-abstract-14 fs-1"
                    ><span class="path1"></span><span class="path2"></span
                  ></i>
                </div>
              </div>
              <!--end::Heaeder menu toggle-->

              <!--begin::Header Logo-->
              <div class="header-logo me-5 me-md-10 flex-grow-1 flex-lg-grow-0">
                <a href="/">
                  <img
                    alt="Logo"
                    src="assets/media/logos/demo2.png"
                    class="logo-default h-25px"
                  />
                  <img
                    alt="Logo"
                    src="assets/media/logos/demo2-sticky.png"
                    class="logo-sticky h-25px"
                  />
                </a>
              </div>
              <!--end::Header Logo-->

              <!--begin::Wrapper-->
              <div
                class="d-flex align-items-stretch justify-content-between flex-lg-grow-1"
              >
                <!--begin::Navbar-->
                <div class="d-flex align-items-stretch" id="kt_header_nav">
                </div>
                <!--end::Navbar-->

                <!--begin::Toolbar wrapper-->
                <div class="topbar d-flex align-items-stretch flex-shrink-0">
                  <!--begin::Theme mode-->
                  <div class="d-flex align-items-center ms-1 ms-lg-3">
                    <!--begin::Menu toggle-->
                    <a
                      href="#"
                      class="btn btn-icon btn-active-light-primary btn-custom w-30px h-30px w-md-40px h-md-40px"
                      data-kt-menu-trigger="{default:'click', lg: 'hover'}"
                      data-kt-menu-attach="parent"
                      data-kt-menu-placement="bottom-end"
                    >
                      <i class="ki-duotone ki-night-day theme-light-show fs-1"
                        ><span class="path1"></span><span class="path2"></span
                        ><span class="path3"></span><span class="path4"></span
                        ><span class="path5"></span><span class="path6"></span
                        ><span class="path7"></span><span class="path8"></span
                        ><span class="path9"></span><span class="path10"></span
                      ></i>
                      <i class="ki-duotone ki-moon theme-dark-show fs-1"
                        ><span class="path1"></span
                        ><span class="path2"></span></i
                    ></a>
                    <!--begin::Menu toggle-->

                    <!--begin::Menu-->
                    <div
                      class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 menu-icon-gray-500 menu-active-bg menu-state-color fw-semibold py-4 fs-base w-150px"
                      data-kt-menu="true"
                      data-kt-element="theme-mode-menu"
                    >
                      <!--begin::Menu item-->
                      <div class="menu-item px-3 my-0">
                        <a
                          href="#"
                          class="menu-link px-3 py-2"
                          data-kt-element="mode"
                          data-kt-value="light"
                        >
                          <span class="menu-icon" data-kt-element="icon">
                            <i class="ki-duotone ki-night-day fs-2"
                              ><span class="path1"></span
                              ><span class="path2"></span
                              ><span class="path3"></span
                              ><span class="path4"></span
                              ><span class="path5"></span
                              ><span class="path6"></span
                              ><span class="path7"></span
                              ><span class="path8"></span
                              ><span class="path9"></span
                              ><span class="path10"></span
                            ></i>
                          </span>
                          <span class="menu-title"> Claire </span>
                        </a>
                      </div>
                      <!--end::Menu item-->

                      <!--begin::Menu item-->
                      <div class="menu-item px-3 my-0">
                        <a
                          href="#"
                          class="menu-link px-3 py-2"
                          data-kt-element="mode"
                          data-kt-value="dark"
                        >
                          <span class="menu-icon" data-kt-element="icon">
                            <i class="ki-duotone ki-moon fs-2"
                              ><span class="path1"></span
                              ><span class="path2"></span
                            ></i>
                          </span>
                          <span class="menu-title"> Sombre </span>
                        </a>
                      </div>
                      <!--end::Menu item-->

                      <!--begin::Menu item-->
                      <div class="menu-item px-3 my-0">
                        <a
                          href="#"
                          class="menu-link px-3 py-2"
                          data-kt-element="mode"
                          data-kt-value="system"
                        >
                          <span class="menu-icon" data-kt-element="icon">
                            <i class="ki-duotone ki-screen fs-2"
                              ><span class="path1"></span
                              ><span class="path2"></span
                              ><span class="path3"></span
                              ><span class="path4"></span
                            ></i>
                          </span>
                          <span class="menu-title"> Système </span>
                        </a>
                      </div>
                      <!--end::Menu item-->
                    </div>
                    <!--end::Menu-->
                  </div>
                  <!--end::Theme mode-->

                  <!--begin::User-->
                  <div
                    class="d-flex align-items-center me-lg-n2 ms-1 ms-lg-3"
                    id="kt_header_user_menu_toggle"
                  >
                    <!--begin::Menu wrapper-->
                    <div
                      class="btn btn-icon btn-active-light-primary btn-custom w-30px h-30px w-md-40px h-md-40px"
                      data-kt-menu-trigger="click"
                      data-kt-menu-attach="parent"
                      data-kt-menu-placement="bottom-end"
                    >
                      <img
                        class="h-30px w-30px rounded"
                        src="assets/media/svg/blank.svg"
                        alt=""
                      />
                    </div>

                    <!--begin::User account menu-->
                    <div
                      class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg menu-state-color fw-semibold py-4 fs-6 w-275px"
                      data-kt-menu="true"
                    >
                      <!--begin::Menu item-->
                      <div class="menu-item px-3">
                        <div
                          class="menu-content d-flex align-items-center px-3"
                        >
                          <!--begin::Avatar-->
                          <div class="symbol symbol-50px me-5">
                            <img
                              alt="Logo"
                              src="assets/media/svg/blank.svg"
                            />
                          </div>
                          <!--end::Avatar-->

                          <!--begin::Username-->
                          <div class="d-flex flex-column">
                            <div class="fw-bold d-flex align-items-center fs-5">
                              Max Smith
                              <span
                                class="badge badge-light-success fw-bold fs-8 px-2 py-1 ms-2"
                                >Admin</span
                              >
                            </div>

                            <a
                              href="#"
                              class="fw-semibold text-muted text-hover-primary fs-7"
                            >
                              max@kt.com
                            </a>
                          </div>
                          <!--end::Username-->
                        </div>
                      </div>
                      <!--end::Menu item-->

                      <!--begin::Menu separator-->
                      <div class="separator my-2"></div>
                      <!--end::Menu separator-->

                      <!--begin::Menu item-->
                      <div class="menu-item px-5">
                        <a
                          href="/"
                          class="menu-link px-5"
                        >
                          Déconnexion
                        </a>
                      </div>
                      <!--end::Menu item-->
                    </div>
                    <!--end::User account menu-->
                    <!--end::Menu wrapper-->
                  </div>
                  <!--end::User -->

                  <!--begin::Aside mobile toggle-->
                  <!--end::Aside mobile toggle-->
                </div>
                <!--end::Toolbar wrapper-->
              </div>
              <!--end::Wrapper-->
            </div>
            <!--end::Container-->
          </div>
          <!--end::Header-->

          <!--begin::Container-->
          <div
            id="kt_content_container"
            class="d-flex flex-column-fluid align-items-start container-xxl"
          >
            <!--begin::Post-->
            <div class="content flex-row-fluid" id="kt_content">
              <!--begin::Row-->
              <div class="row g-5 g-xl-8">
                <!--begin::Col-->
                <div class="col-xl-4">
                  <!--begin::Mixed Widget 5-->
                  <div class="card card-xl-stretch mb-xl-3 scroll-y" style="max-height: 1150px;">
                    <!--begin::Beader-->
                    <div class="card-header border-0 py-5">
                      <h3 class="card-title align-items-start flex-column">
                        <span class="card-label fw-bold fs-3 mb-1">Les personnes présentes</span>

                        <span class="text-muted fw-semibold fs-7"
                          >02 invités présents</span
                        >
                      </h3>
                    </div>
                    <!--end::Header-->

                    <!--begin::Body-->
                    <div class="card-body d-flex flex-column">
                      <!--begin::Chart-->
                      <div
                        class="mixed-widget-5-chart card-rounded-top mb-7"
                        data-kt-chart-color="success"
                        style="height: 100px"
                      ></div>
                      <!--end::Chart-->
                      
                      <!--begin::Item-->
                      <div class="d-flex align-items-center justify-content-between mb-7">
                        <div class="d-flex align-items-center">
                          <!--begin::Avatar-->
                          <div class="symbol symbol-50px me-5">
                            <img
                              src="assets/media/svg/blank.svg"
                              class=""
                              alt=""
                            />
                          </div>
                          <!--end::Avatar-->

                          <!--begin::Text-->
                          <div class="flex-grow-1">
                            <a
                              href="#"
                              class="text-gray-900 fw-bold text-hover-primary fs-6"
                              ><?php echo $row['nom']. ' '.$row['prenom']; ?></a
                            >

                            <span class="text-muted d-block fw-bold"
                              ><?php echo $row['num_table']; ?></span
                            >
                          </div>
                          <!--end::Text-->
                        </div>
                        <?php if ($row['en_salle']) { ?><span class="badge badge-light-success fs-8 fw-bold">En salle</span>
                        <?php } else { ?><span class="badge badge-light-danger fs-8 fw-bold">Dehors</span><?php } ?>
                      </div>
                      <!--end::Item-->
                      <?php } ?>
                    </div>
                    <!--end::Body-->
                  </div>
                  <!--end::Mixed Widget 5-->
                </div>
                <!--end::Col-->

                <!--begin::Col-->
                <div class="col-xl-8">
                  <!--begin::Row-->
                  <div class="row gx-5 gx-xl-8 mb-5 mb-xl-8">
                    <div class="col-xl-3 mb-5 mb-xl-0">
                      <!--begin::Tiles Widget 1-->
                      <div
                        class="card h-150px bgi-no-repeat bgi-size-contain bgi-position-x-center bgi-position-y-center card-xl-stretch border-0 d-flex flex-center p-4 overlay"
                        style="background-image: url('assets/media/bg-qr-code.webp');"
                      >
                        <!--begin::Body-->
                        <div class="card-body overlay-wrapper text-gray-600">
                          <!--begin::Title-->
                          <i class="ki-duotone ki-faceid">
                            <span class="path1"></span>
                            <span class="path2"></span>
                            <span class="path3"></span>
                            <span class="path4"></span>
                            <span class="path5"></span>
                            <span class="path6"></span>
                          </i>
                          <!--end::Title-->
                        </div>
                        <div class="overlay-layer overlay bg-gray-500 bg-opacity-25 rounded d-flex">
                            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#kt_modal_scanne_code">
                                Scanner 
                            </button>
                        </div>
                        <!--end::Body-->
                      </div>
                      <!--end::Tiles Widget 1-->
                    </div>

                    <div class="col-xl-9">
                      <!--begin::Tiles Widget 4-->
                      <div class="card h-150px card-xl-stretch">
                        <!--begin::Body-->
                        <div
                          class="card-body d-flex align-items-center justify-content-between flex-wrap flex-md-nowrap gap-2"
                        >
                          <div class="me-2">
                            <h2 class="fw-bold text-gray-800 mb-3">
                              Accès rapide
                            </h2>

                            <div class="text-muted fw-semibold fs-6">
                              Pour scanner rapidement un code QR 
                              cliquer sur le bouton suivant
                            </div>
                          </div>
                          <a
                            href="#"
                            style="white-space: nowrap;"
                            class="btn btn-primary fw-semibold"
                            data-bs-toggle="modal" data-bs-target="#kt_modal_scanne_code"
                            >Lien direct</a
                          >
                        </div>
                        <!--end::Body-->
                      </div>
                      <!--end::Tiles Widget 4-->
                    </div>
                  </div>
                  <!--end::Row-->

                  <!--begin::Row-->
                  <div class="row gx-5 gx-xl-8 mb-5 mb-xl-8">
                    <!--begin::Col-->

                    <!--begin::Col-->
                    <div class="col-12">
                      <!--begin::Tables Widget 9-->
                      <div class="card card-xl-stretch mb-5 mb-xl-8">
                        <!--begin::Header-->
                        <div class="card-header border-0 pt-5 gap-2 gap-md-5">

                          <h3 class="card-title align-items-start flex-column">
                            <span class="card-label fw-bold fs-3 mb-1"
                              >Liste des invités</span
                            >

                            <span class="text-muted mt-1 fw-semibold fs-7"
                              >Plus de <?php echo $nombreTotalLignes ?> personnes</span
                            >
                          </h3>

                          <div class="card-toolbar flex-row-fluid justify-content-end gap-5">
                            <!--begin::Search-->
                            <div class="d-flex align-items-center position-relative my-1">
                                <i class="ki-duotone ki-magnifier fs-3 position-absolute ms-4"><span class="path1"></span><span class="path2"></span></i>                <input type="text" data-kt-ecommerce-product-filter="search" class="form-control form-control-solid w-250px ps-12" placeholder="Rechercher un invité" />
                            </div>
                            <!--end::Search-->
                            <div
                              class="card-toolbar"
                              data-bs-toggle="tooltip"
                              data-bs-placement="top"
                              data-bs-trigger="hover"
                              title="Cliquer pour ajouter un invité"
                            >
                              <a
                                href="#"
                                class="btn btn-sm btn-light btn-active-primary"
                                data-bs-toggle="modal"
                                data-bs-target="#kt_modal_add_invite"
                              >
                                <i class="ki-duotone ki-plus fs-2"></i> Ajouter un invité
                              </a>
                            </div>
                          </div>
                        </div>
                        <!--end::Header-->

                        <!--begin::Body-->
                        <div class="card-body py-3">
                          <!--begin::Table container-->
                          <div class="table-responsive">
                            <!--begin::Table-->
                            <table
                              class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4"
                              id="kt_ecommerce_invites_table"
                            >
                              <!--begin::Table head-->
                              <thead>
                                <tr class="fw-bold text-muted">
                                  <th class="w-25px">
                                    <div
                                      class="form-check form-check-sm form-check-custom form-check-solid"
                                    >
                                      <input
                                        class="form-check-input"
                                        type="checkbox"
                                        value="1"
                                        data-kt-check="true"
                                        data-kt-check-target=".widget-9-check"
                                      />
                                    </div>
                                  </th>
                                  <th class="min-w-200px">Invités</th>
                                  <th class="min-w-150px">Contact</th>
                                  <th class="min-w-150px">Présence</th>
                                  <th class="min-w-100px text-end">Actions</th>
                                </tr>
                              </thead>
                              <!--end::Table head-->

                              <!--begin::Table body-->
                              <tbody>
                                <?php while ($row = $resultats->fetch(PDO::FETCH_ASSOC)) { ?>
                                  <tr>
                                    <td>
                                      <div
                                        class="form-check form-check-sm form-check-custom form-check-solid"
                                      >
                                        <input
                                          class="form-check-input widget-9-check"
                                          type="checkbox"
                                          value="1"
                                        />
                                      </div>
                                    </td>

                                    <td>
                                      <div class="d-flex align-items-center">
                                        <div class="symbol symbol-45px me-5">
                                          <img
                                            src="assets/media/svg/blank.svg"
                                            alt=""
                                          />
                                        </div>
                                        <div
                                          class="d-flex justify-content-start flex-column"
                                        >
                                          <a
                                            href="#"
                                            class="text-gray-900 fw-bold text-hover-primary fs-6"
                                            data-kt-invites-filter="invite_name"
                                            data-bs-toggle="modal"
                                            data-bs-target="#kt_modal_edit_invite"
                                            onclick="editInvite(
                                              '<?php echo $row['identifiant'] ?>', 
                                              '<?php echo $row['nom'] ?>',
                                              '<?php echo $row['prenom'] ?>',
                                              '<?php echo $row['num_table'] ?>',
                                              '<?php echo $row['telephone'] ?>',
                                              '<?php echo $row['email'] ?>'
                                            )"
                                            ><?php echo $row['nom'] . ' ' . $row['prenom']; ?></a
                                          >

                                          <span
                                            class="text-muted fw-semibold text-muted d-block fs-7"
                                            ><?php echo $row['num_table']; ?></span
                                          >
                                        </div>
                                      </div>
                                    </td>

                                    <td>
                                      <a
                                        href="#"
                                        class="text-gray-900 fw-bold text-hover-primary d-block fs-6"
                                        ><?php echo $row['telephone']; ?></a
                                      >
                                      <span
                                        class="text-muted fw-semibold text-muted d-block fs-7"
                                        ><?php echo $row['email']; ?></span
                                      >
                                    </td>

                                    <td>
                                      <?php if ($row['confirme']) { ?><span class="badge badge-light-success fs-8 fw-bold">Confirmée</span>
                                      <?php } else { ?><span class="badge badge-light-danger fs-8 fw-bold">En attente</span><?php } ?>
                                    </td>

                                    <td>
                                      <div
                                        class="d-flex justify-content-end flex-shrink-0"
                                      >
                                        <a
                                          href="#"
                                          class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1"
                                          data-bs-toggle="modal"
                                          data-bs-target="#kt_modal_edit_invite"
                                          onclick="editInvite(
                                            '<?php echo $row['identifiant'] ?>', 
                                            '<?php echo $row['nom'] ?>',
                                            '<?php echo $row['prenom'] ?>',
                                            '<?php echo $row['num_table'] ?>',
                                            '<?php echo $row['telephone'] ?>',
                                            '<?php echo $row['email'] ?>'
                                          )"
                                        >
                                          <i class="ki-duotone ki-pencil fs-2"
                                            ><span class="path1"></span
                                            ><span class="path2"></span
                                          ></i>
                                        </a>

                                        <a
                                          href="#"
                                          data-id="<?php echo $row['identifiant'] ?>"
                                          class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm"
                                          data-kt-invites-filter="delete_row"
                                        >
                                          <i class="ki-duotone ki-trash fs-2"
                                            ><span class="path1"></span
                                            ><span class="path2"></span
                                            ><span class="path3"></span
                                            ><span class="path4"></span
                                            ><span class="path5"></span
                                          ></i>
                                        </a>
                                      </div>
                                    </td>
                                  </tr>
                                <?php } ?>
                              </tbody>
                              <!--end::Table body-->
                            </table>
                            <!--end::Table-->
                          </div>
                          <!--end::Table container-->
                        </div>
                        <!--begin::Body-->
                      </div>
                      <!--end::Tables Widget 9-->
                    </div>
                    <!--end::Col-->
                  </div>
                  <!--end::Row-->
                </div>
                <!--end::Col-->
              </div>
              <!--end::Row-->
            </div>
            <!--end::Post-->
          </div>
          <!--end::Container-->

          <!--begin::Footer-->
          <div class="footer py-4 d-flex flex-lg-column" id="kt_footer">
            <!--begin::Container-->
            <div
              class="container-xxl d-flex flex-column flex-md-row align-items-center justify-content-between"
            >
              <!--begin::Copyright-->
              <div class="text-gray-900 order-2 order-md-1">
                <span class="text-muted fw-semibold me-1">2024&copy;</span>
                <a
                  href="https://moussa-fofana.dev"
                  target="_blank"
                  class="text-gray-800 text-hover-primary"
                  >EMF Technologies</a
                >
              </div>
              <!--end::Copyright-->

              <!--begin::Menu-->
              <ul
                class="menu menu-gray-600 menu-hover-primary fw-semibold order-1"
              >
                <li class="menu-item">
                  <a
                    href="https://moussa-fofana.dev"
                    target="_blank"
                    class="menu-link px-2"
                    >À propos</a
                  >
                </li>

                <li class="menu-item">
                  <a
                    href="https://moussa-fofana.dev"
                    target="_blank"
                    class="menu-link px-2"
                    >Contact</a
                  >
                </li>

              </ul>
              <!--end::Menu-->
            </div>
            <!--end::Container-->
          </div>
          <!--end::Footer-->
        </div>
        <!--end::Wrapper-->
      </div>
      <!--end::Page-->
    </div>
    <!--end::Root-->

    <!--begin::Scrolltop-->
    <div id="kt_scrolltop" class="scrolltop" data-kt-scrolltop="true">
      <i class="ki-duotone ki-arrow-up"
        ><span class="path1"></span><span class="path2"></span
      ></i>
    </div>
    <!--end::Scrolltop-->

    <!--begin::Modals-->
    <!--begin::Modal - Scanne code-->
    <div class="modal fade" tabindex="-1" id="kt_modal_scanne_code">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-body">
                  <div class="row">
                    <div class="col">
                      <div id="reader" class="w-100"></div>
                    </div>
                  </div>
                </div>
            </div>
        </div>
    </div>
    <!--end::Modal - Invite Friend-->

    <!--begin::Modal - Scanne code-->
    <div
      class="modal fade"
      id="kt_modal_add_invite"
      tabindex="-1"
      aria-hidden="true"
    >
      <!--begin::Modal dialog-->
      <div class="modal-dialog mw-650px">
        <!--begin::Modal content-->
        <div class="modal-content">
          <!--begin::Modal header-->
          <div class="modal-header pb-0 border-0 justify-content-end">
            <!--begin::Close-->
            <div
              class="btn btn-sm btn-icon btn-active-color-primary"
              data-bs-dismiss="modal"
            >
              <i class="ki-duotone ki-cross fs-1"
                ><span class="path1"></span><span class="path2"></span
              ></i>
            </div>
            <!--end::Close-->
          </div>
          <!--begin::Modal header-->

          <!--begin::Modal body-->
          <div class="modal-body scroll-y mx-5 mx-xl-18 pt-0 pb-15">
            <!--begin::Heading-->
            <div class="text-center mb-13">
              <!--begin::Title-->
              <h1 class="mb-3">Ajouter un invité</h1>
              <!--end::Title-->
            </div>
            <!--end::Heading-->

            <!--begin::Form-->
            <form
            class="mx-auto w-100 mw-600px pb-10"
            id="kt_modal_create_campaign_stepper_form"
            action="functions/process_form.php" method="post"
            >
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label mb-3"
                        >Nom complet</label
                    >
                    <!--end::Label-->
                    <div class="row">
                        <div class="col">
                            <!--begin::Input-->
                            <input
                                type="text"
                                class="form-control form-control-lg form-control-solid"
                                name="nom"
                                placeholder="Nom"
                                value=""
                            />
                            <!--end::Input-->
                        </div>
                        <div class="col">
                            <!--begin::Input-->
                            <input
                                type="text"
                                class="form-control form-control-lg form-control-solid"
                                name="prenom"
                                placeholder="Prenom"
                                value=""
                            />
                            <!--end::Input-->
                        </div>
                    </div>
                </div>
                <!--end::Input group-->
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label mb-3"
                        >N° de table</label
                    >
                    <!--end::Label-->
    
                    <!--begin::Input-->
                    <input
                        type="text"
                        class="form-control form-control-lg form-control-solid"
                        name="num_table"
                        placeholder=""
                        value=""
                    />
                    <!--end::Input-->
                </div>
                <!--end::Input group-->
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label mb-3"
                        >Adresse Email</label
                    >
                    <!--end::Label-->
    
                    <!--begin::Input-->
                    <input
                        type="email"
                        class="form-control form-control-lg form-control-solid"
                        name="email"
                        placeholder=""
                        value=""
                    />
                    <!--end::Input-->
                </div>
                <!--end::Input group-->
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label mb-3"
                        >Numéro de téléphone</label
                    >
                    <!--end::Label-->
    
                    <!--begin::Input-->
                    <input
                        type="phone"
                        class="form-control form-control-lg form-control-solid"
                        name="telephone"
                        placeholder=""
                        value=""
                    />
                    <!--end::Input-->
                </div>
                <!--end::Input group-->
                <div class="float-end">
                    <input type="hidden" name="action" value="add_invite">
                    <button type="submit" class="btn btn-lg btn-primary" data-kt-stepper-action="next">
                        Enregistrer
                        <i class="ki-duotone ki-arrow-right fs-3 ms-1 me-0"><span class="path1"></span><span class="path2"></span></i>
                    </button>
                </div>
            </form>
          </div>
          <!--end::Modal body-->
        </div>
        <!--end::Modal content-->
      </div>
      <!--end::Modal dialog-->
    </div>
    <!--end::Modal - Invite Friend-->

    <!--begin::Modal - Edit Invite-->
    <div
      class="modal fade"
      id="kt_modal_edit_invite"
      tabindex="-1"
      aria-hidden="true"
    >
      <!--begin::Modal dialog-->
      <div class="modal-dialog mw-650px">
        <!--begin::Modal content-->
        <div class="modal-content">
          <!--begin::Modal header-->
          <div class="modal-header pb-0 border-0 justify-content-end">
            <!--begin::Close-->
            <div
              class="btn btn-sm btn-icon btn-active-color-primary"
              data-bs-dismiss="modal"
            >
              <i class="ki-duotone ki-cross fs-1"
                ><span class="path1"></span><span class="path2"></span
              ></i>
            </div>
            <!--end::Close-->
          </div>
          <!--begin::Modal header-->

          <!--begin::Modal body-->
          <div class="modal-body scroll-y mx-5 mx-xl-18 pt-0 pb-15">
            <!--begin::Heading-->
            <div class="text-center mb-13">
              <!--begin::Title-->
              <h1 class="mb-3">Modifier un invité</h1>
              <!--end::Title-->
            </div>
            <!--end::Heading-->

            <!--begin::Form-->
            <form
            class="mx-auto w-100 mw-600px pb-10"
            id="kt_modal_create_campaign_stepper_form"
            action="functions/process_form.php" method="post"
            >
                <input
                  type="hidden"
                  name="identifiant"
                  value=""
                />
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label mb-3"
                        >Nom complet</label
                    >
                    <!--end::Label-->
                    <div class="row">
                        <div class="col">
                            <!--begin::Input-->
                            <input
                                type="text"
                                class="form-control form-control-lg form-control-solid"
                                name="nom"
                                placeholder="Nom"
                                value=""
                            />
                            <!--end::Input-->
                        </div>
                        <div class="col">
                            <!--begin::Input-->
                            <input
                                type="text"
                                class="form-control form-control-lg form-control-solid"
                                name="prenom"
                                placeholder="Prenom"
                                value=""
                            />
                            <!--end::Input-->
                        </div>
                    </div>
                </div>
                <!--end::Input group-->
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label mb-3"
                        >N° de table</label
                    >
                    <!--end::Label-->
    
                    <!--begin::Input-->
                    <input
                        type="text"
                        class="form-control form-control-lg form-control-solid"
                        name="num_table"
                        placeholder=""
                        value=""
                    />
                    <!--end::Input-->
                </div>
                <!--end::Input group-->
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label mb-3"
                        >Adresse Email</label
                    >
                    <!--end::Label-->
    
                    <!--begin::Input-->
                    <input
                        type="email"
                        class="form-control form-control-lg form-control-solid"
                        name="email"
                        placeholder=""
                        value=""
                    />
                    <!--end::Input-->
                </div>
                <!--end::Input group-->
                <!--begin::Input group-->
                <div class="mb-10 fv-row">
                    <!--begin::Label-->
                    <label class="required form-label mb-3"
                        >Numéro de téléphone</label
                    >
                    <!--end::Label-->
    
                    <!--begin::Input-->
                    <input
                        type="phone"
                        class="form-control form-control-lg form-control-solid"
                        name="telephone"
                        placeholder=""
                        value=""
                    />
                    <!--end::Input-->
                </div>
                <!--end::Input group-->
                <div class="float-end">
                    <input type="hidden" name="action" value="edit_invite">
                    <button type="submit" class="btn btn-lg btn-primary" data-kt-stepper-action="next">
                        Enregistrer
                        <i class="ki-duotone ki-arrow-right fs-3 ms-1 me-0"><span class="path1"></span><span class="path2"></span></i>
                    </button>
                </div>
            </form>
          </div>
          <!--end::Modal body-->
        </div>
        <!--end::Modal content-->
      </div>
      <!--end::Modal dialog-->
    </div>
    <!--end::Modal - Edit Invite-->
    <!--end::Modals-->

    <!--begin::Global Javascript Bundle(mandatory for all pages)-->
    <script src="assets/plugins/global/plugins.bundle.js"></script>
    <script src="assets/js/scripts.bundle.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!--end::Global Javascript Bundle-->

    <?php
    // Afficher le modal en fonction des résultats
    if (isset($resultatRecherche) && !$resultatRecherche) {
      // Afficher un modal d'erreur
      echo '
      <script type="text/javascript">
          Swal.fire({
              text: "Désolé ! cette personne ne fait pas partir de la liste des invités.",
              icon: "error",
              buttonsStyling: false,
              confirmButtonText: "Okay, compris!",
              customClass: {
                  confirmButton: "btn btn-danger"
              }
          });
      </script>';
    } else if (isset($resultatRecherche)) {
      // Afficher un modal de succès
      if ($resultatRecherche["present"]) {
        echo '
        <script type="text/javascript">
            Swal.fire({
                html: "Cette personne, au nom de <b>'.$resultatRecherche["nom"].' ('.$resultatRecherche["num_table"].')</b> a déjà été scannée et se trouve dans la salle.",
                icon: "info",
                buttonsStyling: false,
                confirmButtonText: "Okay, compris!",
                customClass: {
                    confirmButton: "btn btn-info"
                }
            });
        </script>';
      }
      else {
        echo '
        <script type="text/javascript">
          Swal.fire({
            html: `
              <div class="d-flex gap-5">
                <div class=""><img src="assets/media/svg/blank.svg" class="h-auto w-100px rounded"></div>
                <div class="text-start">
                  <strong>Nom : </strong>'.$resultatRecherche["nom"].'</br>
                  <strong>Prénom : </strong>'.$resultatRecherche["prenom"].'</br>
                  <strong>N° de table : </strong>'.$resultatRecherche["num_table"].'</br>
                  <strong>Téléphone : </strong>'.$resultatRecherche["telephone"].'</br>
                  <strong>Email : </strong>'.$resultatRecherche["email"].'
                </div>
              </div>`,
            width: 500,
            icon: "info",
            buttonsStyling: false,
            showCancelButton: true,
            showLoaderOnConfirm: true,
            cancelButtonText: "Annuler",
            confirmButtonText: "Faire entrer la personne",
            customClass: {
                cancelButton: "btn btn-light-danger",
                confirmButton: "btn btn-info"
            }
          }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                  url: "functions/faire_passer.php", // Remplace avec le nom de ton fichier PHP de modification
                  method: "POST",
                  data: { id: "'.$resultatRecherche["identifiant"].'" }, // Les données que tu envoies (id de l\'invité)
                  success: function(response) {
                      // Gère la réponse ici (optionnel)
                      Swal.fire("L\'invité a été enregistré dans la liste des présents !", "", "success");
      
                      // Actualise la page ou effectue d\'autres actions si nécessaire
                      setTimeout(function() {
                        window.location.href = "index.php";
                      }, 2000) // Actualise la page après la modification (optionnel)
                  },
                  error: function() {
                      // Gère les erreurs ici (optionnel)
                      console.error("Erreur lors de la requête AJAX");
                  }
                });
            }
          });
        </script>';
      }
    }

    // Afficher le modal en fonction des résultats
    $messages = isset($_GET['messages']) ? $_GET['messages'] : null;
    if ($messages) {
      echo '
      <script type="text/javascript">
          Swal.fire({
              html: `'.$messages.'`,
              icon: "success",
              buttonsStyling: false,
              confirmButtonText: "Okay, compris!",
              customClass: {
                  confirmButton: "btn btn-success"
              }
          });
      </script>';
    }
    ?>

    <!--begin::Vendors Javascript(used for this page only)-->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="assets/plugins/datatables.bundle.js"></script>
    <!--end::Vendors Javascript-->

    <!--begin::Custom Javascript(used for this page only)-->
    <script src="assets/js/custom/invites.js"></script>
    <script src="assets/js/widgets.bundle.js"></script>
    <script src="assets/js/custom/widgets.js"></script>
    <!--end::Custom Javascript-->
    <script src="assets/js/html5-qrcode.min.js"></script>
    <script type="text/javascript">
      // Cette fonction sera appelée lorsque tu voudras éditer un invité
      function editInvite(identifiant, nom, prenom, num_table, telephone, email) {
        $('#kt_modal_edit_invite [name="identifiant"]').val(identifiant);
        $('#kt_modal_edit_invite [name="nom"]').val(nom);
        $('#kt_modal_edit_invite [name="prenom"]').val(prenom);
        $('#kt_modal_edit_invite [name="num_table"]').val(num_table);
        $('#kt_modal_edit_invite [name="telephone"]').val(telephone);
        $('#kt_modal_edit_invite [name="email"]').val(email);
      }
      function onScanSuccess(qrCodeMessage) {
          // document.getElementById('result').innerHTML = '<span class="result">'+qrCodeMessage+'</span>';
          window.location.href = qrCodeMessage;
      }
      function onScanError(errorMessage) {
          console.error("Erreur de scan : ", errorMessage);
      }
      var html5QrcodeScanner = new Html5QrcodeScanner(
          "reader", { 
            fps: 10, 
            qrbox: 250, 
            videoConstraints: {
                facingMode: { exact: "environment" },
            },
          }
      );
      html5QrcodeScanner.render(onScanSuccess, onScanError);

    </script>
    <!--end::Javascript-->
  </body>
  <!--end::Body-->
</html>
